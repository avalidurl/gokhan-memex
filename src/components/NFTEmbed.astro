---
interface Props {
  url: string
  title?: string
  creator?: string
  description?: string
}

const { url, title, creator, description } = Astro.props

// Extract platform and basic info from URL
function parseNFTUrl(url: string) {
  try {
    if (url.includes('zora.co')) {
      return { platform: 'Zora', displayUrl: url, action: 'Collect on Zora' }
    } else if (url.includes('foundation.app')) {
      return { platform: 'Foundation', displayUrl: url, action: 'Collect on Foundation' }
    } else if (url.includes('opensea.io')) {
      return { platform: 'OpenSea', displayUrl: url, action: 'View on OpenSea' }
    } else if (url.startsWith('nft://')) {
      return { platform: 'NFT Protocol', displayUrl: url, action: 'View on NFT Protocol' }
    } else if (url.startsWith('ethereum://')) {
      return { platform: 'Ethereum', displayUrl: url, action: 'View on Etherscan' }
    } else {
      return { platform: 'NFT', displayUrl: url, action: 'View NFT' }
    }
  } catch {
    return { platform: 'NFT', displayUrl: url, action: 'View NFT' }
  }
}

const nftInfo = parseNFTUrl(url)
const displayTitle = title || 'Untitled'
---

<div class="my-6 not-prose">
  <div class="space-y-4">
    <!-- NFT Title -->
    <h3 class="text-xl font-bold text-foreground">{displayTitle}</h3>
    
    <!-- Creator Attribution -->
    {creator && (
      <p class="text-sm text-muted-foreground">By {creator}</p>
    )}
    
    <!-- Description -->
    {description && (
      <p class="text-sm text-foreground leading-relaxed">{description}</p>
    )}
    
    <!-- Action Buttons -->
    <div class="flex gap-3 pt-2">
      <a
        href={url}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition-colors text-sm font-medium"
      >
        {nftInfo.action}
      </a>
      <a
        href={url.replace('zora.co', 'etherscan.io')}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center px-4 py-2 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md transition-colors text-sm"
      >
        View on Etherscan
      </a>
    </div>
  </div>
</div>