---
import { getCollection } from 'astro:content'
import BaseLayout from '@/layouts/BaseLayout.astro'
import Breadcrumbs from '@/components/Breadcrumbs.astro'
import ListItem from '@/components/ListItem.astro'
import Card from '@/components/ui/Card.astro'
import CardContent from '@/components/ui/CardContent.astro'
import Accordion from '@/components/ui/Accordion.astro'
import AccordionItem from '@/components/ui/AccordionItem.astro'
import AccordionTrigger from '@/components/ui/AccordionTrigger.astro'
import AccordionContent from '@/components/ui/AccordionContent.astro'
import Badge from '@/components/ui/Badge.astro'
import { formatDate } from '@/lib/utils'

// Import lists data
import listsData from '@/data/lists.json'

const breadcrumbs: { label: string; href: string }[] = []

// Get all published blog posts for music and books categories
const allPosts = (await getCollection('blog'))
  .filter(post => !post.data.draft)
  .sort((a, b) => new Date(b.data.publishDate).valueOf() - new Date(a.data.publishDate).valueOf())

const musicPosts = allPosts.filter(post => post.data.category === 'Music')
const bookPosts = allPosts.filter(post => 
  post.data.category === 'Books' || 
  (post.data.tags && post.data.tags.includes('books'))
)

// Use imported data
const lists = {
  people: listsData.people,
  books: []
}

// Structured data for SEO and LLM understanding
const structuredData = {
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "Influential Thinkers & Essential Reading",
  "description": "Curated collection of thought leaders, researchers, and writers shaping AI, rationality, fintech, and deep tech innovation",
  "author": {
    "@type": "Person",
    "name": "Gökhan Turhan",
    "url": "https://gokhanturhan.com"
  },
  "about": [
    "Artificial Intelligence",
    "Rationality",
    "Financial Technology", 
    "Deep Technology",
    "Innovation",
    "Startups",
    "Technology Research"
  ],
  "hasPart": lists.people.map(person => ({
    "@type": "WebSite",
    "name": person.name,
    "url": person.url,
    "description": person.description
  }))
}

---

<BaseLayout
  title="Influential Thinkers & Essential Reading | Curated Lists"
  description="Discover the thought leaders, researchers, and writers shaping AI, rationality, fintech, and deep tech. From Scott Alexander's Astral Codex Ten to Paul Graham's essays - explore the intellectual network behind breakthrough innovation."
>
  <!-- Structured Data for SEO -->
  <script type="application/ld+json" set:html={JSON.stringify(structuredData)} slot="head" />
  
  <!-- Additional meta tags for topical authority -->
  <meta name="keywords" content="AI researchers, rationality, Scott Alexander, Paul Graham, fintech thought leaders, deep tech innovation, startup advisors, technology writers" slot="head" />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" slot="head" />
  
  <!-- Open Graph optimization -->
  <meta property="og:type" content="website" slot="head" />
  <meta property="og:title" content="Influential Thinkers Shaping AI, Rationality & Deep Tech Innovation" slot="head" />
  <meta property="article:author" content="Gökhan Turhan" slot="head" />
  <meta property="article:section" content="Technology" slot="head" />
  <meta property="article:tag" content="AI Research, Rationality, Fintech, Deep Tech, Innovation" slot="head" />
  <div class="container max-w-4xl mx-auto px-4 py-8">
    <Breadcrumbs items={breadcrumbs} currentPage="Lists" />

    <!-- Header -->
    <div class="mb-12">
      <h1 class="text-3xl md:text-4xl font-bold tracking-tight mb-4">Lists</h1>
    </div>

    <!-- Accordion Lists -->
    <div class="space-y-6">
      <Accordion class="w-full">
        <!-- People List -->
        <AccordionItem data-accordion-item class="border rounded-lg">
          <AccordionTrigger class="text-left">
            <div class="flex items-center justify-between w-full pr-4">
              <h2 class="text-xl font-semibold">Blogroll: People, Newsletters, Podcasts, Research, Publications</h2>
              <Badge variant="secondary">{lists.people.length}</Badge>
            </div>
          </AccordionTrigger>
          <AccordionContent>
            <div class="space-y-6">
              <!-- Context paragraph for SEO -->
              <div class="bg-accent/10 rounded-lg p-4">
                <p class="text-sm text-muted-foreground leading-relaxed">
                  This collection represents a network of <strong>interconnected thinkers</strong> whose work spans <strong>AI safety research</strong>, <strong>rationality studies</strong>, <strong>venture capital insights</strong>, and <strong>deep technology analysis</strong>. Many of these authors reference and build upon each other's work, forming an intellectual ecosystem at the forefront of technological progress.
                </p>
              </div>
              
              <!-- People grid with semantic markup -->
              <section aria-label="Curated list of influential technology thought leaders" class="grid gap-4">
                {lists.people.length === 0 && (
                  <p class="text-sm text-muted-foreground italic text-center py-4">
                    People recommendations will be added here over time.
                  </p>
                )}
                {lists.people.map(person => (
                  <article>
                    <ListItem
                      name={person.name}
                      url={person.url}
                      description={person.description}
                    />
                  </article>
                ))}
              </section>
            </div>
          </AccordionContent>
        </AccordionItem>

        <!-- Books List -->
        <AccordionItem data-accordion-item class="border rounded-lg">
          <AccordionTrigger class="text-left">
            <div class="flex items-center justify-between w-full pr-4">
              <h2 class="text-xl font-semibold">Books</h2>
              <Badge variant="secondary">{bookPosts.length}</Badge>
            </div>
          </AccordionTrigger>
          <AccordionContent>
            <div class="space-y-4">
              <p class="text-sm text-muted-foreground mb-4">
                Book reviews and reading reflections from my journal.
              </p>
              <div class="grid gap-3">
                {bookPosts.map(post => (
                  <div class="flex items-start justify-between p-3 border rounded-lg hover:bg-accent/20 transition-colors">
                    <div class="flex-1">
                      <h3 class="font-medium">
                        <a href={`/journal/${post.slug}`} class="hover:text-primary transition-colors">
                          {post.data.title}
                        </a>
                      </h3>
                      <p class="text-xs text-muted-foreground mt-1">
                        {formatDate(post.data.publishDate)}
                      </p>
                      {post.data.description && (
                        <p class="text-sm text-muted-foreground mt-1 line-clamp-2">
                          {post.data.description}
                        </p>
                      )}
                      {post.data.tags && (
                        <div class="flex gap-1 mt-2">
                          {post.data.tags.slice(0, 3).map(tag => (
                            <Badge variant="outline" class="text-xs">{tag}</Badge>
                          ))}
                        </div>
                      )}
                    </div>
                  </div>
                ))}
                
                {bookPosts.length === 0 && (
                  <p class="text-sm text-muted-foreground italic text-center py-4">
                    Book reviews will appear here as content is published.
                  </p>
                )}
              </div>
            </div>
          </AccordionContent>
        </AccordionItem>

        <!-- Music List -->
        <AccordionItem data-accordion-item class="border rounded-lg">
          <AccordionTrigger class="text-left">
            <div class="flex items-center justify-between w-full pr-4">
              <h2 class="text-xl font-semibold">Music</h2>
              <Badge variant="secondary">{musicPosts.length}</Badge>
            </div>
          </AccordionTrigger>
          <AccordionContent>
            <div class="space-y-4">
              <p class="text-sm text-muted-foreground mb-4">
                Music-related posts from my journal, exploring sound art, playlists, and musical concepts.
              </p>
              <div class="grid gap-3">
                {musicPosts.map(post => (
                  <div class="flex items-start justify-between p-3 border rounded-lg hover:bg-accent/20 transition-colors">
                    <div class="flex-1">
                      <h3 class="font-medium">
                        <a href={`/journal/${post.slug}`} class="hover:text-primary transition-colors">
                          {post.data.title}
                        </a>
                      </h3>
                      <p class="text-xs text-muted-foreground mt-1">
                        {formatDate(post.data.publishDate)}
                      </p>
                      {post.data.tags && (
                        <div class="flex gap-1 mt-2">
                          {post.data.tags.slice(0, 3).map(tag => (
                            <Badge variant="outline" class="text-xs">{tag}</Badge>
                          ))}
                        </div>
                      )}
                    </div>
                  </div>
                ))}
                
                {musicPosts.length === 0 && (
                  <p class="text-sm text-muted-foreground italic text-center py-4">
                    Music posts will appear here after content migration.
                  </p>
                )}
              </div>
            </div>
          </AccordionContent>
        </AccordionItem>
      </Accordion>
    </div>

    <!-- Note -->
    <Card class="mt-8 bg-accent/20 border-accent">
      <CardContent class="p-6">
        <p class="text-sm text-muted-foreground">
          <strong>Note:</strong> These lists are continuously curated and updated. The music section will populate after content migration from the existing blog.
        </p>
      </CardContent>
    </Card>
  </div>
</BaseLayout>