---
import BaseLayout from '@/layouts/BaseLayout.astro'
import { getCollection } from 'astro:content'

// Get all posts grouped by category
const allPosts = await getCollection('blog')

// Get recent posts (last 5)
const recentPosts = allPosts
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 5)

// Get featured essays (longer posts, not interviews)
const essays = allPosts
  .filter(post => post.data.category !== 'Interviews' && post.data.category !== 'Links')
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 5)

// Get interviews
const interviews = allPosts
    .filter(post => post.data.category === 'Interviews')
    .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 4)

// Get research/tech posts
const research = allPosts
  .filter(post => 
    post.data.tags?.some(tag => 
      ['research', 'technology', 'stablecoins', 'defi', 'agi', 'ai'].includes(tag.toLowerCase())
    )
  )
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 4)
---

<BaseLayout 
  title="Gökhan Turhan"
  description="Strategic Innovation Architect exploring stablecoins, AGI, tokenization, and investment strategies. Turning global systemic challenges into high-leverage opportunities through technology and foresight."
>
  <div class="mx-auto max-w-2xl px-6 py-16 lg:py-24">
    <!-- Bio Section -->
    <section class="mb-16">
      <h1 class="font-serif text-3xl md:text-4xl mb-6 text-foreground">
        Gökhan Turhan
      </h1>
      <div class="prose prose-lg dark:prose-invert max-w-none">
        <p class="text-lg text-muted-foreground leading-relaxed">
          T-shaped generalist exploring stablecoins, DeFi mechanics, and deep tech. 
          Currently focused on AGI timelines, tokenization strategies, and turning 
          global systemic challenges into high-leverage opportunities.
        </p>
        <p class="text-base text-muted-foreground">
          Contact via <a href="https://t.me/gigabvgatti" target="_blank" rel="noopener" class="text-foreground hover:underline">Telegram</a> or <a href="mailto:info@gokhanturhan.com" class="text-foreground hover:underline">email</a>.
        </p>
    </div>
    </section>

    <!-- Categorized Links -->
    <div class="space-y-12">
      
      <!-- Recent Writing -->
      {recentPosts.length > 0 && (
        <section>
          <h2 class="text-sm font-medium uppercase tracking-wider text-muted-foreground mb-4">
            Recent Writing
          </h2>
          <ul class="space-y-2">
            {recentPosts.map((post) => (
              <li>
                <a 
                  href={`/journal/${post.slug}/`}
                  class="group flex items-baseline gap-3 py-1"
                >
                  <span class="text-foreground group-hover:underline decoration-1 underline-offset-2">
                    {post.data.title}
                  </span>
                  <span class="text-sm text-muted-foreground shrink-0">
                    {post.data.publishDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}
                  </span>
                </a>
              </li>
            ))}
            </ul>
          <a href="/journal" class="inline-block mt-4 text-sm text-muted-foreground hover:text-foreground transition-colors">
            View all →
          </a>
        </section>
      )}

      <!-- Essays -->
      {essays.length > 0 && (
        <section>
          <h2 class="text-sm font-medium uppercase tracking-wider text-muted-foreground mb-4">
            Essays
          </h2>
          <ul class="space-y-2">
            {essays.map((post) => (
              <li>
                <a 
                  href={`/journal/${post.slug}/`}
                  class="group flex items-baseline gap-3 py-1"
                >
                  <span class="text-foreground group-hover:underline decoration-1 underline-offset-2">
                    {post.data.title}
                  </span>
                  <span class="text-sm text-muted-foreground shrink-0">
                    {post.data.publishDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}
                  </span>
                </a>
              </li>
            ))}
          </ul>
        </section>
      )}

      <!-- Research & Tech -->
      {research.length > 0 && (
        <section>
          <h2 class="text-sm font-medium uppercase tracking-wider text-muted-foreground mb-4">
            Research & Tech
          </h2>
          <ul class="space-y-2">
            {research.map((post) => (
              <li>
                <a 
                  href={`/journal/${post.slug}/`}
                  class="group flex items-baseline gap-3 py-1"
                >
                  <span class="text-foreground group-hover:underline decoration-1 underline-offset-2">
                    {post.data.title}
                  </span>
                  <span class="text-sm text-muted-foreground shrink-0">
                    {post.data.publishDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}
                  </span>
                </a>
              </li>
            ))}
          </ul>
        </section>
      )}

      <!-- Interviews -->
      {interviews.length > 0 && (
        <section>
          <h2 class="text-sm font-medium uppercase tracking-wider text-muted-foreground mb-4">
            Interviews
          </h2>
          <ul class="space-y-2">
            {interviews.map((post) => (
              <li>
                <a 
                  href={`/journal/${post.slug}/`}
                  class="group flex items-baseline gap-3 py-1"
                >
                  <span class="text-foreground group-hover:underline decoration-1 underline-offset-2">
                    {post.data.title}
                  </span>
                  <span class="text-sm text-muted-foreground shrink-0">
                    {post.data.publishDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}
                  </span>
                </a>
              </li>
            ))}
          </ul>
        </section>
      )}

      <!-- Projects -->
      <section>
        <h2 class="text-sm font-medium uppercase tracking-wider text-muted-foreground mb-4">
          Projects
        </h2>
        <ul class="space-y-2">
          <li>
              <a 
                href="https://market-cap-tracker.vercel.app/"
                target="_blank"
              rel="noopener"
              class="group flex items-baseline gap-3 py-1"
            >
              <span class="text-foreground group-hover:underline decoration-1 underline-offset-2">
                NVIDIA vs Crypto Market Cap Tracker
              </span>
              <span class="text-sm text-muted-foreground">↗</span>
            </a>
          </li>
          <li>
              <a 
                href="https://sp100-financial-tracker.pages.dev/"
                target="_blank"
              rel="noopener"
              class="group flex items-baseline gap-3 py-1"
            >
              <span class="text-foreground group-hover:underline decoration-1 underline-offset-2">
                SP100 Financial Tracker
              </span>
              <span class="text-sm text-muted-foreground">↗</span>
            </a>
          </li>
        </ul>
      </section>

      <!-- Quick Links -->
      <section>
        <h2 class="text-sm font-medium uppercase tracking-wider text-muted-foreground mb-4">
          Elsewhere
        </h2>
        <ul class="space-y-2">
          <li>
            <a 
              href="https://x.com/goekhan"
              target="_blank"
              rel="noopener"
              class="group flex items-baseline gap-3 py-1"
            >
              <span class="text-foreground group-hover:underline decoration-1 underline-offset-2">
                X (Twitter)
              </span>
              <span class="text-sm text-muted-foreground">↗</span>
            </a>
          </li>
          <li>
            <a 
              href="https://github.com/avalidurl"
              target="_blank"
              rel="noopener"
              class="group flex items-baseline gap-3 py-1"
            >
              <span class="text-foreground group-hover:underline decoration-1 underline-offset-2">
                GitHub
              </span>
              <span class="text-sm text-muted-foreground">↗</span>
            </a>
          </li>
          <li>
            <a 
              href="https://gokhan.substack.com"
              target="_blank"
              rel="noopener"
              class="group flex items-baseline gap-3 py-1"
            >
              <span class="text-foreground group-hover:underline decoration-1 underline-offset-2">
                Substack
                      </span>
              <span class="text-sm text-muted-foreground">↗</span>
            </a>
          </li>
          <li>
            <a 
              href="https://linkedin.com/in/goekhanturhan"
              target="_blank"
              rel="noopener"
              class="group flex items-baseline gap-3 py-1"
            >
              <span class="text-foreground group-hover:underline decoration-1 underline-offset-2">
                LinkedIn
              </span>
              <span class="text-sm text-muted-foreground">↗</span>
            </a>
          </li>
        </ul>
      </section>

      </div>
  </div>
</BaseLayout>
